<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ut.scf.dao.project.IFactorContractInfoDao">
  <resultMap id="BaseResultMap" type="com.ut.scf.pojo.auto.FactorContractInfo">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue May 23 13:36:14 CST 2017.
    -->
    <id column="contract_no" jdbcType="VARCHAR" property="contractNo" />
    <result column="sign_date" jdbcType="DATE" property="signDate" />
    <result column="contract_val_date" jdbcType="DATE" property="contractValDate" />
    <result column="contract_due_date" jdbcType="DATE" property="contractDueDate" />
    <result column="contract_type" jdbcType="VARCHAR" property="contractType" />
    <result column="order_batch_id" jdbcType="VARCHAR" property="orderBatchId" />
    <result column="product_type" jdbcType="VARCHAR" property="productType" />
    <result column="core_corp_name" jdbcType="VARCHAR" property="coreCorpName" />
    <result column="core_orgn_num" jdbcType="VARCHAR" property="coreOrgnNum" />
    <result column="agency_corp_name" jdbcType="VARCHAR" property="agencyCorpName" />
    <result column="agency_orgn_num" jdbcType="VARCHAR" property="agencyOrgnNum" />
  </resultMap>
  <select id="contractList" resultType="hashmap" parameterType="hashmap" >
  	select contract_no contractNo,sign_date signDate,contract_val_date contractValDate,
  	contract_due_date contractDueDate,contract_type contractType,order_batch_id orderBatchId,
  	product_type  productType,core_corp_name coreCorpName, core_orgn_num coreOrgnNum,agency_corp_name agencyCorpName,
  	agency_orgn_num agencyOrgnNum
    from factor_contract_info 
  	<where>
        1=1
        <if test="signDate != null and signDate !=''">
          and sign_date = #{signDate}
        </if>
         <if test="contractNo != null and contarctNo !=''">
          and contract_no = #{contractNo}
        </if>
         <if test="contractType != null and contarctType !=''">
          and contract_type = #{contractType}
        </if>
         <if test="coreCorpName != null and coreCorpName !=''">
          and core_corp_name = #{coreCorpName}
        </if>
         <if test="agencyCorpName != null and agencyCorpName !=''">
          and agency_corp_name = #{agencyCorpName}
        </if>
         <if test=" productType != null and productType !=''">
          and product_type = #{productType}
        </if>
    	
    </where>
  </select>
  
  <select id="contractFileList" resultType="hashmap" parameterType="hashmap" >
  	select contract_no contractNo,file_name fileName,file_type fileType,
  	file_size fileSize,file_path filePath  
    from factor_contract_file_info 
  	<where>
        contract_no = #{contractNo}
    </where>
  </select>
  
  
   <select id="selectContractSequence" resultType="java.lang.String">
  	select right(MAX(contract_no),2) as sequence 
    from factor_contract_info 
    where sign_date = now()
  </select>
</mapper>